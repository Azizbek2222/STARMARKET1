<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<script type="module" src="script.js"></script>
<link rel="stylesheet" href="index.css">

<!-- INPUT -->
<input id="text" placeholder="search or enter url">

<!-- SEARCH BUTTON -->
<button class="search-btn" id="searchBtn" 
style="border:0; background:none; padding:0; position: absolute; top: 10px; left: 280px;">
    <img src="magnifying-glass.jpg" width="30">
</button>

<style>
.search-btn img {
    transition: 0.25s ease;
}
.search-btn:hover img {
    opacity: 0.75;
}
.search-btn:active img {
    opacity: 0.5;
}
</style>

<!-- IFRAME -->
<iframe src="" style="width:345px; height:700px; border:10px solid #ccc; border-radius:8px;"></iframe>

<!-- ADEXIUM SCRIPT -->
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tgads.space/assets/js/tg-ads-co-widget.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', () => {

    /* 1. Adexium reklama vidjeti */
    const adexiumAds = new AdexiumWidget({
        wid: 'a02f1861-5f60-4748-aefe-3bd7192dfc0e',
        adFormat: 'interstitial',
        debug: false
    });

    const searchBtn = document.getElementById('searchBtn');

    /* Bu FLAG reklama yopilgandan keyin qidiruv ishlashi uchun */
    let readyToSearch = false;

    searchBtn.onclick = () => {
        readyToSearch = true;  // qidiruvga ruxsat beramiz
        adexiumAds.requestAd('interstitial');
    };

    adexiumAds.on('adReceived', (ad) => {
        adexiumAds.displayAd(ad);
    });

    adexiumAds.on('noAdFound', () => {
        // Reklama yo‘q — to‘g‘ridan-to‘g‘ri qidiruvni bajar
        window.openPage();
    });

    adexiumAds.on('adClosed', () => {
        // Reklama yopildi — endi qidiruvni bajar
        if (readyToSearch) {
            window.openPage();
            readyToSearch = false;
        }
    });

});
  </script>
